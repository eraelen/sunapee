<!DOCTYPE html>
<html>
<head>
  <title>Base64.as</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../../../../../../../doc-style.css" />
  <script src="../../../../../../../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../../../../../../../", thisFile = "node_modules/socket.io/node_modules/socket.io-client/lib/vendor/web-socket-js/flash-src/com/hurlant/util/Base64.as", defaultSidebar = true;
  </script>
  <script src="../../../../../../../../../../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>Base64.as</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
<p>Base64 library for ActionScript 3.0.
* Based on: Ma Bingyao code.
* Optimized by: Jean-Philippe Auclair  / jpauclair.wordpress.com
* Copyright (C) 2007 Ma Bingyao <a href="&#x6D;&#x61;&#105;l&#x74;o:a&#x6E;&#100;&#x6F;&#116;&#64;&#117;&#x6A;&#110;.&#x65;&#x64;&#x75;&#x2E;&#99;&#x6E;">a&#x6E;&#100;&#x6F;&#116;&#64;&#117;&#x6A;&#110;.&#x65;&#x64;&#x75;&#x2E;&#99;&#x6E;</a>
* LastModified: Oct 26, 2009
* This library is free.  You can redistribute it and/or modify it.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="kd">package</span> <span class="nx">com</span><span class="p">.</span><span class="nx">hurlant</span><span class="p">.</span><span class="nx">util</span><span class="p">{</span>
    <span class="kd">import</span> <span class="nx">flash</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nb">ByteArray</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">class</span> <span class="nx">Base64</span>
    <span class="p">{</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">_encodeChars</span> <span class="o">:</span> <span class="nx">Vector</span><span class="p">.</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">InitEncoreChar</span><span class="p">();</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">_decodeChars</span> <span class="o">:</span> <span class="nx">Vector</span><span class="p">.</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">InitDecodeChar</span><span class="p">();</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">function</span> <span class="nx">encodeByteArray</span><span class="p">(</span><span class="nx">data</span> <span class="o">:</span> <span class="nb">ByteArray</span><span class="p">)</span> <span class="o">:</span> <span class="nb">String</span>
        <span class="p">{</span>
            <span class="k">var</span> <span class="nx">out</span> <span class="o">:</span> <span class="nb">ByteArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">ByteArray</span><span class="p">();</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2">&#182;</a>
</div>
<p>Presetting the length keep the memory smaller and optimize speed since there is no "grow" needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">out</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="p">((</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span><span class="p">))</span> <span class="o">*</span> <span class="mi">4</span> <span class="sr">/ 3; //Preset length /</span><span class="o">/</span><span class="mf">1.6</span> <span class="nx">to</span> <span class="mf">1.5</span> <span class="nx">ms</span>
            <span class="k">var</span> <span class="nx">i</span> <span class="o">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">r</span> <span class="o">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span> <span class="o">%</span> <span class="mi">3</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">len</span> <span class="o">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">r</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">c</span> <span class="o">:</span> <span class="nb">int</span><span class="o">;</span>   <span class="c1">//read (3) character AND write (4) characters</span>

            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">)</span>
            <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>
<p>Read 3 Characters (8bit * 3 = 24 bits)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">c</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span> <span class="o">|</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span> <span class="o">|</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4">&#182;</a>
</div>
<p>Cannot optimize this to read int because of the positioning overhead. (as3 bytearray seek is slow)
Convert to 4 Characters (6 bit * 4 = 24 bits)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">c</span> <span class="o">=</span> <span class="p">(</span><span class="nx">_encodeChars</span><span class="p">[</span><span class="nx">c</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">18</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nx">_encodeChars</span><span class="p">[</span><span class="nx">c</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">12</span> <span class="o">&amp;</span> <span class="mh">0x3f</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nx">_encodeChars</span><span class="p">[</span><span class="nx">c</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">6</span> <span class="o">&amp;</span> <span class="mh">0x3f</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="nx">_encodeChars</span><span class="p">[</span><span class="nx">c</span> <span class="o">&amp;</span> <span class="mh">0x3f</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5">&#182;</a>
</div>
<p>Optimization: On older and slower computer, do one write Int instead of 4 write byte: 1.5 to 0.71 ms</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">out</span><span class="p">.</span><span class="nx">writeInt</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<p>out.writeByte(<em>encodeChars[c >> 18] );
out.writeByte(</em>encodeChars[c >> 12 &amp; 0x3f]);
out.writeByte(<em>encodeChars[c >> 6 &amp; 0x3f]);
out.writeByte(</em>encodeChars[c &amp; 0x3f]);</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">//Need two &quot;=&quot; padding</span>
            <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7">&#182;</a>
</div>
<p>Read one char, write two chars, write padding</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">c</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="nx">c</span> <span class="o">=</span> <span class="p">(</span><span class="nx">_encodeChars</span><span class="p">[</span><span class="nx">c</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nx">_encodeChars</span><span class="p">[(</span><span class="nx">c</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">|</span> <span class="mi">61</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span> <span class="o">|</span> <span class="mi">61</span><span class="o">;</span>
                <span class="nx">out</span><span class="p">.</span><span class="nx">writeInt</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">//Need one &quot;=&quot; padding</span>
            <span class="p">{</span>
                <span class="nx">c</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span> <span class="o">|</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="nx">c</span> <span class="o">=</span> <span class="p">(</span><span class="nx">_encodeChars</span><span class="p">[</span><span class="nx">c</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">10</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nx">_encodeChars</span><span class="p">[</span><span class="nx">c</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mh">0x3f</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nx">_encodeChars</span><span class="p">[(</span><span class="nx">c</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="mi">61</span><span class="o">;</span>
                <span class="nx">out</span><span class="p">.</span><span class="nx">writeInt</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">out</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">return</span> <span class="nx">out</span><span class="p">.</span><span class="nx">readUTFBytes</span><span class="p">(</span><span class="nx">out</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
        <span class="p">}</span>


        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">function</span> <span class="nx">decodeToByteArray</span><span class="p">(</span><span class="nx">str</span> <span class="o">:</span> <span class="nb">String</span><span class="p">)</span> <span class="o">:</span> <span class="nb">ByteArray</span>
        <span class="p">{</span>
            <span class="k">var</span> <span class="nx">c1</span> <span class="o">:</span> <span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">c2</span> <span class="o">:</span> <span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">c3</span> <span class="o">:</span> <span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">c4</span> <span class="o">:</span> <span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">i</span> <span class="o">:</span> <span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">len</span> <span class="o">:</span> <span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">out</span> <span class="o">:</span> <span class="nb">ByteArray</span><span class="o">;</span>
            <span class="nx">len</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span>
            <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="nx">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">ByteArray</span><span class="p">();</span>
            <span class="k">var</span> <span class="nx">byteString</span> <span class="o">:</span> <span class="nb">ByteArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">ByteArray</span><span class="p">();</span>
            <span class="nx">byteString</span><span class="p">.</span><span class="nx">writeUTFBytes</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">)</span>
            <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8">&#182;</a>
</div>
<p>c1</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">do</span>
                <span class="p">{</span>
                    <span class="nx">c1</span> <span class="o">=</span> <span class="nx">_decodeChars</span><span class="p">[</span><span class="nx">byteString</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">]];</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="o">&amp;&amp;</span> <span class="nx">c1</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">c1</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">break</span><span class="o">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<p>c2</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">do</span>
                <span class="p">{</span>
                    <span class="nx">c2</span> <span class="o">=</span> <span class="nx">_decodeChars</span><span class="p">[</span><span class="nx">byteString</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">]];</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="o">&amp;&amp;</span> <span class="nx">c2</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">c2</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">break</span><span class="o">;</span>

                <span class="nx">out</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">((</span><span class="nx">c1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="p">((</span><span class="nx">c2</span> <span class="o">&amp;</span> <span class="mh">0x30</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">));</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10">&#182;</a>
</div>
<p>c3</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">do</span>
                <span class="p">{</span>
                    <span class="nx">c3</span> <span class="o">=</span> <span class="nx">byteString</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">c3</span> <span class="o">==</span> <span class="mi">61</span><span class="p">)</span> <span class="k">return</span> <span class="nx">out</span><span class="o">;</span>

                    <span class="nx">c3</span> <span class="o">=</span> <span class="nx">_decodeChars</span><span class="p">[</span><span class="nx">c3</span><span class="p">];</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="o">&amp;&amp;</span> <span class="nx">c3</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">c3</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">break</span><span class="o">;</span>

                <span class="nx">out</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(((</span><span class="nx">c2</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="p">((</span><span class="nx">c3</span> <span class="o">&amp;</span> <span class="mh">0x3c</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">));</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11">&#182;</a>
</div>
<p>c4</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">do</span> <span class="p">{</span>
                    <span class="nx">c4</span> <span class="o">=</span> <span class="nx">byteString</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">c4</span> <span class="o">==</span> <span class="mi">61</span><span class="p">)</span> <span class="k">return</span> <span class="nx">out</span><span class="o">;</span>

                    <span class="nx">c4</span> <span class="o">=</span> <span class="nx">_decodeChars</span><span class="p">[</span><span class="nx">c4</span><span class="p">];</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="o">&amp;&amp;</span> <span class="nx">c4</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">c4</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">break</span><span class="o">;</span>

                <span class="nx">out</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(((</span><span class="nx">c3</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="nx">c4</span><span class="p">);</span>

            <span class="p">}</span>

            <span class="nx">out</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

            <span class="k">return</span> <span class="nx">out</span><span class="o">;</span>
        <span class="p">}</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">function</span> <span class="nx">encode</span><span class="p">(</span><span class="nx">data</span> <span class="o">:</span> <span class="nb">String</span><span class="p">)</span> <span class="o">:</span> <span class="nb">String</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12">&#182;</a>
</div>
<p>Convert string to ByteArray</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">var</span> <span class="nx">bytes</span> <span class="o">:</span> <span class="nb">ByteArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">ByteArray</span><span class="p">();</span>
            <span class="nx">bytes</span><span class="p">.</span><span class="nx">writeUTFBytes</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13">&#182;</a>
</div>
<p>Return encoded ByteArray</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">return</span> <span class="nx">encodeByteArray</span><span class="p">(</span><span class="nx">bytes</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">function</span> <span class="nx">decode</span><span class="p">(</span><span class="nx">data</span> <span class="o">:</span> <span class="nb">String</span><span class="p">)</span> <span class="o">:</span> <span class="nb">String</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14">&#182;</a>
</div>
<p>Decode data to ByteArray</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">var</span> <span class="nx">bytes</span> <span class="o">:</span> <span class="nb">ByteArray</span> <span class="o">=</span> <span class="nx">decodeToByteArray</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15">&#182;</a>
</div>
<p>Convert to string and return</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">return</span> <span class="nx">bytes</span><span class="p">.</span><span class="nx">readUTFBytes</span><span class="p">(</span><span class="nx">bytes</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">function</span> <span class="nx">InitEncoreChar</span><span class="p">()</span> <span class="o">:</span> <span class="nx">Vector</span><span class="p">.</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
        <span class="p">{</span>
            <span class="k">var</span> <span class="nx">encodeChars</span> <span class="o">:</span> <span class="nx">Vector</span><span class="p">.</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vector</span><span class="p">.</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">();</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16">&#182;</a>
</div>
<p>We could push the number directly, but i think it's nice to see the characters (with no overhead on encode/decode)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">var</span> <span class="nx">chars</span> <span class="o">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="s2">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span><span class="o">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">64</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">encodeChars</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chars</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
            <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17">&#182;</a>
</div>
<p>encodeChars.push(
65, 66, 67, 68, 69, 70, 71, 72,
73, 74, 75, 76, 77, 78, 79, 80,
81, 82, 83, 84, 85, 86, 87, 88,
89, 90, 97, 98, 99, 100, 101, 102,
103, 104, 105, 106, 107, 108, 109, 110,
111, 112, 113, 114, 115, 116, 117, 118,
119, 120, 121, 122, 48, 49, 50, 51,
52, 53, 54, 55, 56, 57, 43, 47);</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">return</span> <span class="nx">encodeChars</span><span class="o">;</span>
        <span class="p">}</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">function</span> <span class="nx">InitDecodeChar</span><span class="p">()</span> <span class="o">:</span> <span class="nx">Vector</span><span class="p">.</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
        <span class="p">{</span>
            <span class="k">var</span> <span class="nx">decodeChars</span> <span class="o">:</span> <span class="nx">Vector</span><span class="p">.</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vector</span><span class="p">.</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">();</span>

            <span class="nx">decodeChars</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">62</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">63</span><span class="o">,</span>
                    <span class="mi">52</span><span class="o">,</span> <span class="mi">53</span><span class="o">,</span> <span class="mi">54</span><span class="o">,</span> <span class="mi">55</span><span class="o">,</span> <span class="mi">56</span><span class="o">,</span> <span class="mi">57</span><span class="o">,</span> <span class="mi">58</span><span class="o">,</span> <span class="mi">59</span><span class="o">,</span> <span class="mi">60</span><span class="o">,</span> <span class="mi">61</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span>
                    <span class="mi">15</span><span class="o">,</span> <span class="mi">16</span><span class="o">,</span> <span class="mi">17</span><span class="o">,</span> <span class="mi">18</span><span class="o">,</span> <span class="mi">19</span><span class="o">,</span> <span class="mi">20</span><span class="o">,</span> <span class="mi">21</span><span class="o">,</span> <span class="mi">22</span><span class="o">,</span> <span class="mi">23</span><span class="o">,</span> <span class="mi">24</span><span class="o">,</span> <span class="mi">25</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">26</span><span class="o">,</span> <span class="mi">27</span><span class="o">,</span> <span class="mi">28</span><span class="o">,</span> <span class="mi">29</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="mi">31</span><span class="o">,</span> <span class="mi">32</span><span class="o">,</span> <span class="mi">33</span><span class="o">,</span> <span class="mi">34</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="mi">36</span><span class="o">,</span> <span class="mi">37</span><span class="o">,</span> <span class="mi">38</span><span class="o">,</span> <span class="mi">39</span><span class="o">,</span> <span class="mi">40</span><span class="o">,</span>
                    <span class="mi">41</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="mi">43</span><span class="o">,</span> <span class="mi">44</span><span class="o">,</span> <span class="mi">45</span><span class="o">,</span> <span class="mi">46</span><span class="o">,</span> <span class="mi">47</span><span class="o">,</span> <span class="mi">48</span><span class="o">,</span> <span class="mi">49</span><span class="o">,</span> <span class="mi">50</span><span class="o">,</span> <span class="mi">51</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span>
                    <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>
                    <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">decodeChars</span><span class="o">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
